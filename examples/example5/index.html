<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        svg {
            width: 100%;
            height: 100%;
            max-height: 100vh;
        }
    </style>
</head>

<body>
    <svg id="temp-icon" version="1.1" height="100" width="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(0 -270.54)">
            <path transform="translate(0 270.54)"
                d="m50 15c-5.54 0-10 4.46-10 10v33.844a15 15 0 0 0-5 11.156 15 15 0 0 0 15 15 15 15 0 0 0 15-15 15 15 0 0 0-5-11.16v-33.84c0-5.54-4.46-10-10-10z"
                fill="none" stroke="#000018" stroke-width="1.0016" />
            <rect id="bar" x="45" y="290.54" width="10" height="45" ry="5" fill="#00f" />
            <circle id="circle" cx="50" cy="340.54" r="10" fill="#00f" />
            <g fill="none" stroke="#000" stroke-width="1px">
                <path d="m60 300.54h5" />
                <path d="m60 310.54h5" />
                <path d="m60 320.54h5" />
            </g>
        </g>
    </svg>

    <script>
        var tempIcon = document.querySelector("#temp-icon #bar");
        var tempCircle = document.querySelector("#temp-icon #circle");

        var maxTemp = 30;
        var minTemp = 0;

        var tempIconC = tempIcon.getBBox();
        var tempIconXOrigin = tempIconC.x + (tempIconC.width / 2);
        var tempIconYOrigin = tempIconC.y + tempIconC.height;

        setInterval(() => {
            var temperature = Math.round(Math.random() * maxTemp) + minTemp;

            var tempPercentage = temperature / (maxTemp - minTemp);
            var scalePercentage = (tempPercentage / 1.2) + (1 - (1 / 1.2));

            tempIcon.style.transformOrigin = tempIconXOrigin + "px " + tempIconYOrigin + "px";

            tempIcon.style.transform = "scaleY(" + scalePercentage + ")";

            tempIcon.style.transition = "transform 2s ease, fill  1s ease";
            tempCircle.style.transition = "transform 2s ease, fill  1s ease";

            var fColor;
            if (temperature <= (maxTemp / 3)) {
                fColor = "blue";
            }
            else if (temperature > (maxTemp / 3) && temperature < (maxTemp / 3) * 2) {
                fColor = "orange";
            }
            else if (temperature >= (maxTemp / 3) * 2) {
                fColor = "red";
            }

            tempIcon.style.fill = fColor;
            tempCircle.style.fill = fColor;
        }, 3000);

    </script>
</body>

</html>